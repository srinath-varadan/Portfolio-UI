{"version":3,"sources":["../../../src/ts/components/framework/agComponentUtils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iDAAwD;AAIxD,mDAAkD;AAClD,uCAA+C;AAG/C;IAAsC,oCAAQ;IAA9C;;IAgDA,CAAC;IA3CU,wCAAa,GAApB,UAAqB,YAAoB,EAAE,UAAe;QACtD,IAAM,QAAQ,GAAsB,IAAI,CAAC,yBAAyB,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;QAC1F,IAAI,QAAQ,IAAI,QAAQ,CAAC,eAAe,EAAE;YACtC,OAAO,QAAQ,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;SAC/C;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,oDAAyB,GAAhC,UAAiC,QAAa;QAC1C;YAAA;YAyBA,CAAC;YArBG,yBAAO,GAAP,UAAQ,MAA2B;gBAC/B,OAAO,KAAK,CAAC;YACjB,CAAC;YAED,wBAAM,GAAN;gBACI,OAAO,IAAI,CAAC,IAAI,CAAC;YACrB,CAAC;YAED,sBAAI,GAAJ,UAAM,MAA2B;gBAC7B,IAAM,cAAc,GAAyB,QAAQ,CAAC,MAAM,CAAC,CAAC;gBAC9D,IAAM,IAAI,GAAG,OAAO,cAAc,CAAC;gBACnC,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,SAAS,EAAE;oBAC9D,IAAI,CAAC,IAAI,GAAG,kBAAY,CAAC,QAAQ,GAAG,cAAc,GAAG,SAAS,CAAC,CAAC;oBAChE,OAAO;iBACV;gBACD,IAAI,cAAc,IAAE,IAAI,EAAE;oBACtB,IAAI,CAAC,IAAI,GAAG,kBAAY,CAAC,eAAe,CAAC,CAAC;oBAC1C,OAAO;iBACV;gBACD,IAAI,CAAC,IAAI,GAAI,cAA6B,CAAC;YAC/C,CAAC;YACL,cAAC;QAAD,CAzBA,AAyBC,IAAA;QAED,OAAO,OAAO,CAAC;IACnB,CAAC;IAEM,kDAAuB,GAA9B,UAA+B,SAAc;QACzC,IAAI,CAAC,SAAS,EAAE;YAAE,OAAO,KAAK,CAAC;SAAE;QACjC,OAAQ,SAAiB,CAAC,SAAS,IAAI,QAAQ,IAAK,SAAiB,CAAC,SAAS,CAAC;IACpF,CAAC;IA5CD;QADC,mBAAS,CAAC,2BAA2B,CAAC;uEACsB;IAHpD,gBAAgB;QAD5B,cAAI,CAAC,kBAAkB,CAAC;OACZ,gBAAgB,CAgD5B;IAAD,uBAAC;CAhDD,AAgDC,CAhDqC,mBAAQ,GAgD7C;AAhDY,4CAAgB","file":"agComponentUtils.js","sourcesContent":["import { Autowired, Bean } from \"../../context/context\";\nimport { IComponent } from \"../../interfaces/iComponent\";\nimport { ComponentMetadata, ComponentMetadataProvider } from \"./componentMetadataProvider\";\nimport { ICellRendererComp, ICellRendererParams } from \"../../rendering/cellRenderers/iCellRenderer\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { loadTemplate } from \"../../utils/dom\";\n\n@Bean(\"agComponentUtils\")\nexport class AgComponentUtils extends BeanStub {\n\n    @Autowired(\"componentMetadataProvider\")\n    private componentMetadataProvider: ComponentMetadataProvider;\n\n    public adaptFunction(propertyName: string, jsCompFunc: any): any {\n        const metadata: ComponentMetadata = this.componentMetadataProvider.retrieve(propertyName);\n        if (metadata && metadata.functionAdapter) {\n            return metadata.functionAdapter(jsCompFunc);\n        }\n        return null;\n    }\n\n    public adaptCellRendererFunction(callback: any): { new(): IComponent<ICellRendererParams>; } {\n        class Adapter implements ICellRendererComp {\n\n            private eGui: HTMLElement;\n\n            refresh(params: ICellRendererParams): boolean {\n                return false;\n            }\n\n            getGui(): HTMLElement {\n                return this.eGui;\n            }\n\n            init?(params: ICellRendererParams): void {\n                const callbackResult: string | HTMLElement = callback(params);\n                const type = typeof callbackResult;\n                if (type === 'string' || type === 'number' || type === 'boolean') {\n                    this.eGui = loadTemplate('<span>' + callbackResult + '</span>');\n                    return;\n                }\n                if (callbackResult==null) {\n                    this.eGui = loadTemplate('<span></span>');\n                    return;\n                }\n                this.eGui =  callbackResult as HTMLElement;\n            }\n        }\n\n        return Adapter;\n    }\n\n    public doesImplementIComponent(candidate: any): boolean {\n        if (!candidate) { return false; }\n        return (candidate as any).prototype && 'getGui' in (candidate as any).prototype;\n    }\n}\n"]}