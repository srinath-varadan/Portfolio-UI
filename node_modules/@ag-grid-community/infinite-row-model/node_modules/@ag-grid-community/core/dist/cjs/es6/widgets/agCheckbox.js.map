{"version":3,"sources":["../../../src/ts/widgets/agCheckbox.ts"],"names":[],"mappings":"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","file":"agCheckbox.js","sourcesContent":["import { Events, CheckboxChangedEvent } from \"../events\";\nimport { AgEvent } from '../events';\nimport { AgAbstractInputField, IInputField } from './agAbstractInputField';\nimport { LabelAlignment } from './agAbstractLabel';\n\nexport interface ChangeEvent extends AgEvent {\n    selected: boolean;\n}\n\nexport class AgCheckbox extends AgAbstractInputField<HTMLInputElement, boolean> {\n\n    protected labelAlignment: LabelAlignment = 'right';\n\n    private selected?: boolean = false;\n    private readOnly = false;\n    private passive = false;\n\n    constructor(config?: IInputField, className = 'ag-checkbox', inputType = 'checkbox') {\n        super(config, className, inputType);\n    }\n\n    protected addInputListeners() {\n        this.addManagedListener(this.eInput, 'click', this.onCheckboxClick.bind(this));\n        this.addManagedListener(this.eLabel, 'click', this.toggle.bind(this));\n    }\n\n    public getNextValue(): boolean {\n        return this.selected === undefined ? true : !this.selected;\n    }\n\n    public setPassive(passive: boolean): void {\n        this.passive = passive;\n    }\n\n    public isReadOnly(): boolean {\n        return this.readOnly;\n    }\n\n    public setReadOnly(readOnly: boolean): void {\n        this.eWrapper.classList.toggle('ag-disabled', readOnly);\n        this.eInput.disabled = readOnly;\n        this.readOnly = readOnly;\n    }\n\n    public setDisabled(disabled: boolean): this {\n        this.eWrapper.classList.toggle('ag-disabled', disabled);\n\n        return super.setDisabled(disabled);\n    }\n\n    public toggle(): void {\n        if (this.eInput.disabled) { return; }\n\n        const previousValue = this.isSelected();\n        const nextValue = this.getNextValue();\n\n        if (this.passive) {\n            this.dispatchChange(nextValue, previousValue);\n        } else {\n            this.setValue(nextValue);\n        }\n    }\n\n    public getValue(): boolean | undefined {\n        return this.isSelected();\n    }\n\n    public setValue(value?: boolean, silent?: boolean): this {\n        this.refreshSelectedClass(value);\n        this.setSelected(value, silent);\n\n        return this;\n    }\n\n    public setName(name: string): this {\n        const input = this.getInputElement();\n        input.name = name;\n\n        return this;\n    }\n\n    protected isSelected(): boolean | undefined {\n        return this.selected;\n    }\n\n    private setSelected(selected?: boolean, silent?: boolean): void {\n        if (this.isSelected() === selected) {\n            return;\n        }\n\n        this.previousValue = this.isSelected();\n\n        selected = this.selected = typeof selected === 'boolean' ? selected : undefined;\n        this.eInput.checked = selected!;\n        this.eInput.indeterminate = selected === undefined;\n\n        if (!silent) {\n            this.dispatchChange(this.selected, this.previousValue);\n        }\n    }\n\n    private dispatchChange(selected: boolean | undefined, previousValue: boolean | undefined, event?: MouseEvent) {\n        this.dispatchEvent({ type: AgCheckbox.EVENT_CHANGED, selected, previousValue, event });\n\n        const input = this.getInputElement();\n        const checkboxChangedEvent: CheckboxChangedEvent = {\n            type: Events.EVENT_CHECKBOX_CHANGED,\n            id: input.id,\n            name: input.name,\n            selected,\n            previousValue\n        };\n\n        this.eventService.dispatchEvent(checkboxChangedEvent);\n    }\n\n    private onCheckboxClick(e: MouseEvent) {\n        if (this.passive || this.eInput.disabled) { return; }\n        const previousValue = this.isSelected();\n        const selected = this.selected = (e.target as HTMLInputElement).checked;\n        this.refreshSelectedClass(selected);\n        this.dispatchChange(selected, previousValue, e);\n    }\n\n    private refreshSelectedClass(value?: boolean | null) {\n        this.eWrapper.classList.toggle('ag-checked', value === true);\n        this.eWrapper.classList.toggle('ag-indeterminate', value == null);\n    }\n}\n"]}