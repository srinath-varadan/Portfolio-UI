{"version":3,"sources":["../../../src/ts/components/framework/userComponentRegistry.ts"],"names":[],"mappings":"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","file":"userComponentRegistry.js","sourcesContent":["import { BeanStub } from \"../../context/beanStub\";\nimport { Autowired, Bean, PostConstruct } from \"../../context/context\";\nimport { GridOptions } from \"../../entities/gridOptions\";\nimport { ReadOnlyFloatingFilter } from \"../../filter/floating/provided/readOnlyFloatingFilter\";\nimport { DateFilter } from \"../../filter/provided/date/dateFilter\";\nimport { DateFloatingFilter } from \"../../filter/provided/date/dateFloatingFilter\";\nimport { DefaultDateComponent } from \"../../filter/provided/date/defaultDateComponent\";\nimport { NumberFilter } from \"../../filter/provided/number/numberFilter\";\nimport { NumberFloatingFilter } from \"../../filter/provided/number/numberFloatingFilter\";\nimport { TextFilter } from \"../../filter/provided/text/textFilter\";\nimport { TextFloatingFilter } from \"../../filter/provided/text/textFloatingFilter\";\nimport { HeaderComp } from \"../../headerRendering/cells/column/headerComp\";\nimport { HeaderGroupComp } from \"../../headerRendering/cells/columnGroup/headerGroupComp\";\nimport { IComponent } from \"../../interfaces/iComponent\";\nimport { LargeTextCellEditor } from \"../../rendering/cellEditors/largeTextCellEditor\";\nimport { PopupSelectCellEditor } from \"../../rendering/cellEditors/popupSelectCellEditor\";\nimport { PopupTextCellEditor } from \"../../rendering/cellEditors/popupTextCellEditor\";\nimport { SelectCellEditor } from \"../../rendering/cellEditors/selectCellEditor\";\nimport { TextCellEditor } from \"../../rendering/cellEditors/textCellEditor\";\nimport { AnimateShowChangeCellRenderer } from \"../../rendering/cellRenderers/animateShowChangeCellRenderer\";\nimport { AnimateSlideCellRenderer } from \"../../rendering/cellRenderers/animateSlideCellRenderer\";\nimport { GroupCellRenderer } from \"../../rendering/cellRenderers/groupCellRenderer\";\nimport { LoadingCellRenderer } from \"../../rendering/cellRenderers/loadingCellRenderer\";\nimport { LoadingOverlayComponent } from \"../../rendering/overlays/loadingOverlayComponent\";\nimport { NoRowsOverlayComponent } from \"../../rendering/overlays/noRowsOverlayComponent\";\nimport { TooltipComponent } from \"../../rendering/tooltipComponent\";\nimport { doOnce } from \"../../utils/function\";\nimport { iterateObject } from '../../utils/object';\nimport { AgComponentUtils } from \"./agComponentUtils\";\n\n/**\n * B the business interface (ie IHeader)\n * A the agGridComponent interface (ie IHeaderComp). The final object acceptable by ag-grid\n */\nexport interface RegisteredComponent {\n    component: any;\n    componentFromFramework: boolean;\n}\n\nexport interface DeprecatedComponentName {\n    propertyHolder: string;\n    newComponentName: string;\n}\n\n@Bean('userComponentRegistry')\nexport class UserComponentRegistry extends BeanStub {\n\n    @Autowired('gridOptions') private gridOptions: GridOptions;\n    @Autowired('agComponentUtils') private readonly agComponentUtils: AgComponentUtils;\n\n    private agGridDefaults: { [key: string]: any } = {\n        //date\n        agDateInput: DefaultDateComponent,\n\n        //header\n        agColumnHeader: HeaderComp,\n        agColumnGroupHeader: HeaderGroupComp,\n\n        //floating filters\n        agTextColumnFloatingFilter: TextFloatingFilter,\n        agNumberColumnFloatingFilter: NumberFloatingFilter,\n        agDateColumnFloatingFilter: DateFloatingFilter,\n        agReadOnlyFloatingFilter: ReadOnlyFloatingFilter,\n\n        // renderers\n        agAnimateShowChangeCellRenderer: AnimateShowChangeCellRenderer,\n        agAnimateSlideCellRenderer: AnimateSlideCellRenderer,\n        agGroupCellRenderer: GroupCellRenderer,\n        agGroupRowRenderer: GroupCellRenderer,\n        agLoadingCellRenderer: LoadingCellRenderer,\n\n        //editors\n        agCellEditor: TextCellEditor,\n        agTextCellEditor: TextCellEditor,\n        agSelectCellEditor: SelectCellEditor,\n        agPopupTextCellEditor: PopupTextCellEditor,\n        agPopupSelectCellEditor: PopupSelectCellEditor,\n        agLargeTextCellEditor: LargeTextCellEditor,\n\n        //filter\n        agTextColumnFilter: TextFilter,\n        agNumberColumnFilter: NumberFilter,\n        agDateColumnFilter: DateFilter,\n\n        //overlays\n        agLoadingOverlay: LoadingOverlayComponent,\n        agNoRowsOverlay: NoRowsOverlayComponent,\n\n        // tooltips\n        agTooltipComponent: TooltipComponent\n    };\n\n    private agDeprecatedNames: { [key: string]: DeprecatedComponentName; } = {\n        set: {\n            newComponentName: 'agSetColumnFilter',\n            propertyHolder: 'filter'\n        },\n        text: {\n            newComponentName: 'agTextColumnFilter',\n            propertyHolder: 'filter'\n        },\n        number: {\n            newComponentName: 'agNumberColumnFilter',\n            propertyHolder: 'filter'\n        },\n        date: {\n            newComponentName: 'agDateColumnFilter',\n            propertyHolder: 'filter'\n        },\n\n        group: {\n            newComponentName: 'agGroupCellRenderer',\n            propertyHolder: 'cellRenderer'\n        },\n        animateShowChange: {\n            newComponentName: 'agAnimateShowChangeCellRenderer',\n            propertyHolder: 'cellRenderer'\n        },\n        animateSlide: {\n            newComponentName: 'agAnimateSlideCellRenderer',\n            propertyHolder: 'cellRenderer'\n        },\n\n        select: {\n            newComponentName: 'agSelectCellEditor',\n            propertyHolder: 'cellEditor'\n        },\n        largeText: {\n            newComponentName: 'agLargeTextCellEditor',\n            propertyHolder: 'cellEditor'\n        },\n        popupSelect: {\n            newComponentName: 'agPopupSelectCellEditor',\n            propertyHolder: 'cellEditor'\n        },\n        popupText: {\n            newComponentName: 'agPopupTextCellEditor',\n            propertyHolder: 'cellEditor'\n        },\n        richSelect: {\n            newComponentName: 'agRichSelectCellEditor',\n            propertyHolder: 'cellEditor'\n        },\n        headerComponent: {\n            newComponentName: 'agColumnHeader',\n            propertyHolder: 'headerComponent'\n        }\n    };\n\n    private jsComps: { [key: string]: any } = {};\n    private fwComps: { [key: string]: any } = {};\n\n    @PostConstruct\n    private init(): void {\n        if (this.gridOptions.components != null) {\n            iterateObject(this.gridOptions.components, (key, component) => this.registerJsComponent(key, component));\n        }\n\n        if (this.gridOptions.frameworkComponents != null) {\n            iterateObject(this.gridOptions.frameworkComponents,\n                (key, component) => this.registerFwComponent(key, component as any));\n        }\n    }\n\n    public registerDefaultComponent(rawName: string, component: any) {\n        const name = this.translateIfDeprecated(rawName);\n\n        if (this.agGridDefaults[name]) {\n            console.error(`Trying to overwrite a default component. You should call registerComponent`);\n            return;\n        }\n\n        this.agGridDefaults[name] = component;\n    }\n\n    private registerJsComponent(rawName: string, component: any) {\n        const name = this.translateIfDeprecated(rawName);\n\n        if (this.fwComps[name]) {\n            console.error(`Trying to register a component that you have already registered for frameworks: ${name}`);\n            return;\n        }\n\n        this.jsComps[name] = component;\n    }\n\n    /**\n     * B the business interface (ie IHeader)\n     * A the agGridComponent interface (ie IHeaderComp). The final object acceptable by ag-grid\n     */\n    private registerFwComponent<A extends IComponent<any> & B, B>(rawName: string, component: { new(): IComponent<B>; }) {\n        const warningMessage = `AG Grid: As of v27, registering components via grid property frameworkComponents is deprecated. Instead register both JavaScript AND Framework Components via the components property.`;\n        doOnce( ()=> console.warn(warningMessage), `UserComponentRegistry.frameworkComponentsDeprecated`);\n\n        const name = this.translateIfDeprecated(rawName);\n        this.fwComps[name] = component;\n    }\n\n    public retrieve(rawName: string): {componentFromFramework: boolean, component: any} | null {\n        const name = this.translateIfDeprecated(rawName);\n\n        const createResult = (component: any, componentFromFramework: boolean) => ({componentFromFramework, component});\n\n        // FrameworkOverrides.frameworkComponent() is used in two locations:\n        // 1) for Vue, user provided components get registered via a framework specific way.\n        // 2) for React, it's how the React UI provides alternative default components (eg GroupCellRenderer and DetailCellRenderer)\n        const registeredViaFrameworkComp = this.getFrameworkOverrides().frameworkComponent(name);\n        if (registeredViaFrameworkComp!=null) {\n            return createResult(registeredViaFrameworkComp, true);\n        }\n\n        const frameworkComponent = this.fwComps[name];\n        if (frameworkComponent) {\n            return createResult(frameworkComponent, true);\n        }\n\n        const jsComponent = this.jsComps[name];\n        if (jsComponent) {\n            const isFwkComp = this.getFrameworkOverrides().isFrameworkComponent(jsComponent);\n            return createResult(jsComponent, isFwkComp);\n        }\n\n        const defaultComponent = this.agGridDefaults[name];\n        if (defaultComponent) {\n            return createResult(defaultComponent, false);\n        }\n\n        if (Object.keys(this.agGridDefaults).indexOf(name) < 0) {\n            console.warn(`AG Grid: Looking for component [${name}] but it wasn't found.`);\n        }\n\n        return null;\n    }\n\n    private translateIfDeprecated(raw: string): string {\n        const deprecatedInfo = this.agDeprecatedNames[raw];\n\n        if (deprecatedInfo != null) {\n            doOnce(() => {\n                console.warn(`ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename ${deprecatedInfo.propertyHolder}:${raw} to ${deprecatedInfo.propertyHolder}:${deprecatedInfo.newComponentName}`);\n            }, 'DEPRECATE_COMPONENT_' + raw);\n\n            return deprecatedInfo.newComponentName;\n        }\n\n        return raw;\n    }\n}\n"]}